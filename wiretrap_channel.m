function [y,z] = wiretrap_channel(x)
    % Ensure `x` is a valid codeword.
    assert(bitand(x(1), bitcmp(0x7f, "uint8")) == 0);

    %Ty|x (8  possibilities)
    y_pos=[0,0,0,0,0,0,0;0,0,0,0,0,0,1;0,0,0,0,0,1,0;0,0,0,0,1,0,0;0,0,0,1,0,0,0;0,0,1,0,0,0,0;0,1,0,0,0,0,0;1,0,0,0,0,0,0];
    %Tz|x (64 possibilities)
    z_pos=[0,0,0,0,0,0,0;0,0,0,0,0,0,1;0,0,0,0,0,1,0;0,0,0,0,1,0,0;0,0,0,1,0,0,0;0,0,1,0,0,0,0;0,1,0,0,0,0,0;1,0,0,0,0,0,0;
          0,0,0,0,0,1,1;0,0,0,0,1,0,1;0,0,0,1,0,0,1;0,0,1,0,0,0,1;0,1,0,0,0,0,1;1,0,0,0,0,0,1;0,0,0,0,1,1,0;0,0,0,1,0,1,0;
          0,0,1,0,0,1,0;0,1,0,0,0,1,0;1,0,0,0,0,1,0;0,0,0,1,1,0,0;0,0,1,0,1,0,0;0,1,0,0,1,0,0;1,0,0,0,1,0,0;0,0,1,1,0,0,0;
          0,1,0,1,0,0,0;1,0,0,1,0,0,0;0,1,1,0,0,0,0;1,0,1,0,0,0,0;1,1,0,0,0,0,0;0,0,0,0,1,1,1;0,0,0,1,0,1,1;0,0,1,0,0,1,1;
          0,1,0,0,0,1,1;1,0,0,0,0,1,1;0,0,0,1,1,0,1;0,0,1,0,1,0,1;0,1,0,0,1,0,1;1,0,0,0,1,0,1;0,0,1,1,0,0,1;0,1,0,1,0,0,1;
          1,0,0,1,0,0,1;0,1,1,0,0,0,1;1,0,1,0,0,0,1;1,1,0,0,0,0,1;0,0,0,1,1,1,0;0,0,1,0,1,1,0;0,1,0,0,1,1,0;1,0,0,0,1,1,0;
          0,0,1,1,0,1,0;0,1,0,1,0,1,0;1,0,0,1,0,1,0;0,1,1,0,0,1,0;1,0,1,0,0,1,0;1,1,0,0,0,1,0;0,0,1,1,1,0,0;0,1,0,1,1,0,0;
          1,0,0,1,1,0,0;0,1,1,0,1,0,0;1,0,1,0,1,0,0;1,1,0,0,1,0,0;0,1,1,1,0,0,0;1,0,1,1,0,0,0;1,1,0,1,0,0,0;1,1,1,0,0,0,0];

    % Legitimate channel
    t_y=randi(length(y_pos));
    c_y=y_pos(t_y,:);
    y=uint8(xor(x,c_y)); % y has at most 1 binary error per word

    % Eavesdropper channel
    t_z=randi(length(z_pos));
    c_z=z_pos(t_z,:);
    z=uint8(xor(x,c_z));% z has at most 3 binary error per word
end